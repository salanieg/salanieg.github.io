<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="robots" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Camus: The Absurd Journey</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=EB+Garamond:ital,wght@0,400;0,600;1,400&display=swap');
    
    html, body, #root { 
      height: 100%; 
      margin: 0; 
      overflow: hidden;
    }
    
    .cinzel { font-family: 'Cinzel', serif; }
    .garamond { font-family: 'EB Garamond', serif; }
    
    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px) rotate(-1deg); }
      75% { transform: translateX(10px) rotate(1deg); }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in-up {
      animation: fadeInUp 1s ease-out;
    }
    
    .vignette {
      box-shadow: inset 0 0 100px rgba(0,0,0,0.8);
    }
    
    @keyframes grain {
      0%, 100% { transform: translate(0, 0); }
      10% { transform: translate(-5%, -5%); }
      20% { transform: translate(-10%, 5%); }
      30% { transform: translate(5%, -10%); }
      40% { transform: translate(-5%, 15%); }
      50% { transform: translate(-10%, 5%); }
      60% { transform: translate(15%, 0); }
      70% { transform: translate(0, 10%); }
      80% { transform: translate(-15%, 0); }
      90% { transform: translate(10%, 5%); }
    }
    
    .film-grain {
      position: fixed;
      top: -50%;
      left: -50%;
      right: -50%;
      bottom: -50%;
      width: 200%;
      height: 200%;
      background: repeating-radial-gradient(circle at 17% 32%, transparent 0, rgba(255,255,255,.03) 1px, transparent 2px);
      animation: grain 8s steps(10) infinite;
      pointer-events: none;
      opacity: 0.4;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
  const { useState, useEffect, useRef } = React;

  const CamusGame = () => {
    const [gameState, setGameState] = useState('intro');
    const [dialogStep, setDialogStep] = useState(0);
    const [speedLevel, setSpeedLevel] = useState(0);
    const [drivingDialogIndex, setDrivingDialogIndex] = useState(0);
    const [showGasButton, setShowGasButton] = useState(false);
    const [displayedText, setDisplayedText] = useState('');
    const [isTyping, setIsTyping] = useState(false);
    const [showCrashEffect, setShowCrashEffect] = useState(false);
    const mountRef = useRef(null);
    const sceneRef = useRef(null);
    const animationRef = useRef(null);
    const audioContextRef = useRef(null);

    const dialogLines = [
      { speaker: 'Michel', text: 'Albert, ich fahre nach Paris zurück. Möchtest du in meinem Facel Vega mitfahren?', otherSpeaker: 'Camus' },
      { speaker: 'Camus', text: 'Ich weiß nicht, Michel. Ich habe bereits eine Zugkarte.', otherSpeaker: 'Camus' },
      { speaker: 'Michel', text: 'Janine und Anne werden auch dabei sein. Es wird eine angenehme Fahrt.', otherSpeaker: 'Janine' },
      { speaker: 'Janine', text: 'Es wäre doch schön, gemeinsam zu fahren, Albert.', otherSpeaker: 'Janine' },
      { speaker: 'Michel', text: 'Anne freut sich schon auf die Reise.', otherSpeaker: 'Anne' },
      { speaker: 'Anne', text: 'Wir haben genug Platz im Auto, Monsieur Camus.', otherSpeaker: 'Anne' },
      { speaker: 'Anne', text: 'Mami, wieso sieht der Reifen so komisch aus?', otherSpeaker: 'Anne' },
      { speaker: 'Janine', text: 'Sei still und steig ein.', otherSpeaker: 'Janine' },
      { speaker: 'Michel', text: 'Komm schon, Albert! Der Wagen fährt wunderbar. Du wirst es nicht bereuen.', otherSpeaker: 'Camus' },
      { speaker: 'Camus', text: 'Nun gut... Ihr habt mich überzeugt. Ich komme mit.', otherSpeaker: 'Camus' }
    ];

    const drivingDialogs = [
      { speaker: 'Michel', text: 'Es ist ein schöner Tag für eine Fahrt nach Paris.', showGas: false },
      { speaker: 'Camus', text: 'Ja, die Landschaft ist wirklich beeindruckend.', showGas: false },
      { speaker: 'Michel', text: 'Wir machen ausgezeichnete Zeit.', showGas: false },
      { speaker: 'Camus', text: 'Der Wagen fährt sehr komfortabel.', showGas: true },
      { speaker: 'Michel', text: 'Der Facel Vega ist ein Meisterwerk französischer Ingenieurskunst.', showGas: false },
      { speaker: 'Camus', text: 'Die Straße wird schmaler hier...', showGas: false },
      { speaker: 'Michel', text: 'Keine Sorge, ich kenne diese Strecke gut.', showGas: false },
      { speaker: 'Camus', text: 'Wie lange noch bis Paris?', showGas: false },
      { speaker: 'Michel', text: 'Noch etwa zwei Stunden. Wir können schneller fahren.', showGas: true },
      { speaker: 'Camus', text: 'Das Wetter verschlechtert sich...', showGas: false },
      { speaker: 'Michel', text: 'Ein bisschen Nebel macht nichts.', showGas: false },
      { speaker: 'Camus', text: 'Die Bäume ziehen so schnell vorbei...', showGas: false },
      { speaker: 'Michel', text: 'Der Motor läuft perfekt. Spürst du die Kraft?', showGas: false },
      { speaker: 'Camus', text: 'Michel, vielleicht sollten wir langsamer...', showGas: true },
      { speaker: 'Michel', text: 'Vertrau mir, ich habe alles unter Kontrolle.', showGas: false },
      { speaker: 'Camus', text: 'Die Kurve da vorne... Michel!', showGas: false },
      { speaker: 'Michel', text: 'Ich sehe sie, ich—', showGas: false }
    ];

    const playTypingSound = (speaker) => {
      if (!audioContextRef.current) {
        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
      }
      
      const ctx = audioContextRef.current;
      const oscillator = ctx.createOscillator();
      const gainNode = ctx.createGain();
      
      const pitches = {
        'Michel': 180,
        'Camus': 160,
        'Janine': 280,
        'Anne': 320
      };
      
      oscillator.type = 'square';
      oscillator.frequency.value = pitches[speaker] || 200;
      gainNode.gain.value = 0.03;
      
      oscillator.connect(gainNode);
      gainNode.connect(ctx.destination);
      
      oscillator.start();
      gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
      setTimeout(() => oscillator.stop(), 50);
    };

    useEffect(() => {
      const currentText = gameState === 'dialog' 
        ? dialogLines[dialogStep].text 
        : gameState === 'driving' && drivingDialogs[drivingDialogIndex]
          ? drivingDialogs[drivingDialogIndex].text 
          : '';

      const currentSpeaker = gameState === 'dialog'
        ? dialogLines[dialogStep].speaker
        : gameState === 'driving' && drivingDialogs[drivingDialogIndex]
          ? drivingDialogs[drivingDialogIndex].speaker
          : '';

      setDisplayedText('');
      setIsTyping(true);

      let currentIndex = 0;
      const typingSpeed = gameState === 'driving' ? 25 : 30;
      const typingInterval = setInterval(() => {
        if (currentIndex < currentText.length) {
          setDisplayedText(currentText.substring(0, currentIndex + 1));
          playTypingSound(currentSpeaker);
          currentIndex++;
        } else {
          setIsTyping(false);
          clearInterval(typingInterval);
        }
      }, typingSpeed);

      return () => clearInterval(typingInterval);
    }, [dialogStep, drivingDialogIndex, gameState]);

    useEffect(() => {
      if (gameState === 'driving' && drivingDialogIndex < drivingDialogs.length) {
        setShowGasButton(drivingDialogs[drivingDialogIndex].showGas && speedLevel < 3);
      }
    }, [drivingDialogIndex, gameState, speedLevel]);

    useEffect(() => {
      if (gameState !== 'driving' || !mountRef.current) return;

      while (mountRef.current.firstChild) {
        mountRef.current.removeChild(mountRef.current.firstChild);
      }

      const scene = new THREE.Scene();
      scene.fog = new THREE.Fog(0x1a2332, 10, 100);
      scene.background = new THREE.Color(0x0f1419);

      const camera = new THREE.PerspectiveCamera(75, mountRef.current.clientWidth / mountRef.current.clientHeight, 0.1, 1000);
      camera.position.set(0, 4.5, 12);
      camera.lookAt(0, 1, -10);

      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(mountRef.current.clientWidth, mountRef.current.clientHeight);
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      mountRef.current.appendChild(renderer.domElement);

      const ambientLight = new THREE.AmbientLight(0x445566, 0.4);
      scene.add(ambientLight);
      
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
      directionalLight.position.set(5, 20, 5);
      directionalLight.castShadow = true;
      scene.add(directionalLight);

      const hemisphereLight = new THREE.HemisphereLight(0x87ceeb, 0x362310, 0.5);
      scene.add(hemisphereLight);

      const carGroup = new THREE.Group();

      const bodyGeometry = new THREE.BoxGeometry(2.2, 1, 4.5);
      const bodyMaterial = new THREE.MeshPhongMaterial({ 
        color: 0x0a0a0a, 
        shininess: 100,
        specular: 0x333333
      });
      const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
      body.position.y = 0.5;
      body.castShadow = true;
      carGroup.add(body);

      const roofGeometry = new THREE.BoxGeometry(1.7, 0.8, 2.8);
      const roof = new THREE.Mesh(roofGeometry, bodyMaterial);
      roof.position.set(0, 1.35, -0.4);
      roof.castShadow = true;
      carGroup.add(roof);

      const hoodGeometry = new THREE.BoxGeometry(2, 0.5, 1.5);
      const hood = new THREE.Mesh(hoodGeometry, bodyMaterial);
      hood.position.set(0, 0.8, 1.8);
      hood.castShadow = true;
      carGroup.add(hood);

      const grillGeometry = new THREE.BoxGeometry(1.8, 0.4, 0.2);
      const grillMaterial = new THREE.MeshPhongMaterial({ 
        color: 0x888888,
        shininess: 120,
        specular: 0xffffff
      });
      const grill = new THREE.Mesh(grillGeometry, grillMaterial);
      grill.position.set(0, 0.4, 2.6);
      carGroup.add(grill);

      const headlightGeometry = new THREE.SphereGeometry(0.2, 8, 8);
      const headlightMaterial = new THREE.MeshBasicMaterial({ color: 0xffffcc });
      const headlightLeft = new THREE.Mesh(headlightGeometry, headlightMaterial);
      headlightLeft.position.set(-0.7, 0.5, 2.7);
      carGroup.add(headlightLeft);
      const headlightRight = new THREE.Mesh(headlightGeometry, headlightMaterial);
      headlightRight.position.set(0.7, 0.5, 2.7);
      carGroup.add(headlightRight);

      const taillightGeometry = new THREE.SphereGeometry(0.15, 8, 8);
      const taillightMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000, emissive: 0xff0000, emissiveIntensity: 0.8 });
      const taillightLeft = new THREE.Mesh(taillightGeometry, taillightMaterial);
      taillightLeft.position.set(-0.8, 0.6, -2.3);
      carGroup.add(taillightLeft);
      const taillightRight = new THREE.Mesh(taillightGeometry, taillightMaterial);
      taillightRight.position.set(0.8, 0.6, -2.3);
      carGroup.add(taillightRight);

      const windowMaterial = new THREE.MeshPhongMaterial({ 
        color: 0x1a3344,
        transparent: true,
        opacity: 0.7,
        shininess: 90
      });
      const frontWindowGeometry = new THREE.BoxGeometry(1.6, 0.7, 0.1);
      const frontWindow = new THREE.Mesh(frontWindowGeometry, windowMaterial);
      frontWindow.position.set(0, 1.35, 0.95);
      carGroup.add(frontWindow);

      const wheelGeometry = new THREE.CylinderGeometry(0.45, 0.45, 0.35, 16);
      const wheelMaterial = new THREE.MeshPhongMaterial({ color: 0x2b2b2b, shininess: 40 });
      const tireMaterial = new THREE.MeshPhongMaterial({ color: 0x1a1a1a });

      const wheels = [];
      const wheelPositions = [
        [-1.1, 0, 1.5], [1.1, 0, 1.5],
        [-1.1, 0, -1.5], [1.1, 0, -1.5]
      ];

      wheelPositions.forEach(pos => {
        const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
        wheel.rotation.z = Math.PI / 2;
        wheel.position.set(pos[0], pos[1], pos[2]);
        wheel.castShadow = true;

        const tireGeometry = new THREE.TorusGeometry(0.45, 0.15, 8, 16);
        const tire = new THREE.Mesh(tireGeometry, tireMaterial);
        tire.rotation.y = Math.PI / 2;
        tire.position.set(pos[0], pos[1], pos[2]);

        carGroup.add(wheel);
        carGroup.add(tire);
        wheels.push(wheel);
      });

      carGroup.position.y = 0.45;
      scene.add(carGroup);

      const roadGeometry = new THREE.PlaneGeometry(10, 300);
      const roadMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x2a2a2a,
        roughness: 0.9,
        metalness: 0.1
      });
      const road = new THREE.Mesh(roadGeometry, roadMaterial);
      road.rotation.x = -Math.PI / 2;
      road.position.z = -100;
      road.receiveShadow = true;
      scene.add(road);

      const grassMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x2d3a1f,
        roughness: 1,
        metalness: 0
      });
      
      const grassLeft = new THREE.Mesh(
        new THREE.PlaneGeometry(50, 300),
        grassMaterial
      );
      grassLeft.rotation.x = -Math.PI / 2;
      grassLeft.position.set(-30, -0.01, -100);
      grassLeft.receiveShadow = true;
      scene.add(grassLeft);

      const grassRight = new THREE.Mesh(
        new THREE.PlaneGeometry(50, 300),
        grassMaterial
      );
      grassRight.rotation.x = -Math.PI / 2;
      grassRight.position.set(30, -0.01, -100);
      grassRight.receiveShadow = true;
      scene.add(grassRight);

      const roadLines = [];
      for (let i = 0; i < 50; i++) {
        const lineGeometry = new THREE.PlaneGeometry(0.4, 3);
        const lineMaterial = new THREE.MeshBasicMaterial({ color: 0xaaaa66 });
        const line = new THREE.Mesh(lineGeometry, lineMaterial);
        line.rotation.x = -Math.PI / 2;
        line.position.set(0, 0.02, -6 * i);
        scene.add(line);
        roadLines.push(line);
      }

      const trees = [];
      for (let i = 0; i < 50; i++) {
        const trunkGeometry = new THREE.CylinderGeometry(0.35, 0.45, 4, 8);
        const trunkMaterial = new THREE.MeshStandardMaterial({ 
          color: 0x3d2817,
          roughness: 0.9
        });
        const trunk = new THREE.Mesh(trunkGeometry, trunkMaterial);
        trunk.castShadow = true;

        const foliageGeometry = new THREE.SphereGeometry(1.8, 8, 8);
        const foliageMaterial = new THREE.MeshStandardMaterial({ 
          color: 0x1a4a1a,
          roughness: 1
        });
        const foliage = new THREE.Mesh(foliageGeometry, foliageMaterial);
        foliage.position.y = 3;
        foliage.castShadow = true;

        const tree = new THREE.Group();
        tree.add(trunk);
        tree.add(foliage);

        const side = (i % 2 === 0) ? 7 : -7;
        tree.position.set(side + (Math.random() - 0.5) * 3, 2, -10 * i);
        scene.add(tree);
        trees.push(tree);
      }

      sceneRef.current = {
        scene, camera, renderer, carGroup, wheels, trees, road, roadLines
      };

      let roadOffset = 0;
      let wheelRotation = 0;
      let sidewaysMotion = 0;

      const animate = () => {
        const baseSpeed = (speedLevel + 1) * 0.15;
        const speed = baseSpeed * (1 + Math.random() * 0.1);
        
        roadOffset += speed;
        wheelRotation += speed * 3;

        if (speedLevel >= 2) {
          sidewaysMotion += 0.05;
          const wobble = Math.sin(sidewaysMotion);
          carGroup.position.x = wobble * 3;
          carGroup.rotation.y = wobble * 0.25;
          carGroup.rotation.z = Math.cos(sidewaysMotion) * 0.18;
          
          camera.position.x = wobble * 0.5;
          camera.rotation.z = wobble * 0.02;
        } else {
          carGroup.position.x = Math.sin(roadOffset * 0.3) * 0.15 * speedLevel;
          carGroup.rotation.y = 0;
          carGroup.rotation.z = Math.sin(roadOffset * 0.5) * 0.04 * (speedLevel + 1);
          camera.position.x = 0;
          camera.rotation.z = 0;
        }

        carGroup.rotation.x = -speed * 0.15;

        wheels.forEach(wheel => {
          wheel.rotation.x = wheelRotation;
        });

        roadLines.forEach(line => {
          line.position.z += speed;
          if (line.position.z > 15) {
            line.position.z -= 300;
          }
        });

        trees.forEach(tree => {
          tree.position.z += speed;
          if (tree.position.z > 15) {
            tree.position.z -= 500;
          }
        });

        renderer.render(scene, camera);
        animationRef.current = requestAnimationFrame(animate);
      };

      animate();

      return () => {
        if (animationRef.current) {
          cancelAnimationFrame(animationRef.current);
        }
        if (mountRef.current && renderer.domElement && mountRef.current.contains(renderer.domElement)) {
          mountRef.current.removeChild(renderer.domElement);
        }
        renderer.dispose();
        scene.clear();
      };
    }, [gameState, speedLevel]);

    const handleDialogNext = () => {
      if (isTyping) return;
      if (dialogStep < dialogLines.length - 1) {
        setDialogStep(dialogStep + 1);
      } else {
        setGameState('driving');
      }
    };

    const handleAccelerate = () => {
      if (speedLevel < 2) {
        setSpeedLevel(speedLevel + 1);
        setShowGasButton(false);
        if (drivingDialogIndex < drivingDialogs.length - 1) {
          setDrivingDialogIndex(drivingDialogIndex + 1);
        }
      } else {
        setShowCrashEffect(true);
        setTimeout(() => {
          setGameState('crash');
          setShowCrashEffect(false);
        }, 2000);
      }
    };

    const handleDrivingDialogNext = () => {
      if (isTyping) return;
      if (drivingDialogIndex < drivingDialogs.length - 1) {
        setDrivingDialogIndex(drivingDialogIndex + 1);
      } else {
        setShowCrashEffect(true);
        setTimeout(() => {
          setGameState('crash');
          setShowCrashEffect(false);
        }, 2000);
      }
    };

    const resetGame = () => {
      setGameState('intro');
      setDialogStep(0);
      setSpeedLevel(0);
      setDrivingDialogIndex(0);
      setShowGasButton(false);
      setDisplayedText('');
      setIsTyping(false);
    };

    const startGame = () => {
      setGameState('dialog');
    };

    const getCharacterAvatar = (name) => {
      const avatars = {
        'Michel': { 
          image: 'images/cds/gallimard.jpeg',
          border: 'border-gray-600',
          shadow: 'shadow-gray-900/50'
        },
        'Camus': { 
          image: 'images/cds/camus.jpeg',
          border: 'border-gray-600',
          shadow: 'shadow-gray-900/50'
        },
        'Janine': { 
          image: 'images/cds/janine.jpeg',
          border: 'border-gray-600',
          shadow: 'shadow-gray-900/50'
        },
        'Anne': { 
          image: 'images/cds/anne.jpeg',
          border: 'border-gray-600',
          shadow: 'shadow-gray-900/50'
        }
      };
      return avatars[name] || avatars['Michel'];
    };

    if (gameState === 'intro') {
      return (
        <div className="min-h-screen bg-black relative overflow-hidden">
          <div className="film-grain"></div>
          <div className="absolute inset-0 bg-gradient-to-b from-gray-900 via-slate-800 to-black"></div>
          
          <div className="relative z-10 min-h-screen flex flex-col items-center justify-center p-8 fade-in-up">
            <div className="text-center mb-12">
              <h1 className="cinzel text-7xl font-bold text-gray-100 mb-4 tracking-wider drop-shadow-2xl">
                THE ABSURD JOURNEY
              </h1>
              <div className="h-1 w-64 mx-auto bg-gradient-to-r from-transparent via-gray-400 to-transparent mb-6"></div>
              <p className="garamond text-2xl text-gray-400 italic mb-8">
                Eine existenzielle Reise durch das Schicksal
              </p>
              <p className="garamond text-xl text-gray-500 mb-2">4. Januar 1960</p>
              <p className="garamond text-lg text-gray-600">Lourmarin, Provence</p>
            </div>

            <div className="max-w-2xl bg-black/70 backdrop-blur-sm border-2 border-gray-700 p-10 mb-8 vignette">
              <p className="garamond text-gray-300 text-xl leading-relaxed mb-6 italic">
                »Das Absurdeste ist, in einem Autounfall zu sterben.«
              </p>
              <p className="garamond text-gray-400 text-lg text-right">
                — Albert Camus, 1955
              </p>
            </div>

            <button
              onClick={startGame}
              className="cinzel bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-gray-200 font-bold py-5 px-12 border-2 border-gray-600 transition-all duration-300 text-xl shadow-2xl hover:shadow-gray-700/50 hover:scale-105"
            >
              ▶ BEGINNEN
            </button>
          </div>
        </div>
      );
    }

    if (gameState === 'dialog') {
      const currentLine = dialogLines[dialogStep];
      const leftChar = 'Michel';
      const rightChar = currentLine.otherSpeaker;
      const leftAvatar = getCharacterAvatar(leftChar);
      const rightAvatar = getCharacterAvatar(rightChar);

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-900 via-gray-800 to-slate-900 relative overflow-hidden">
          <div className="film-grain"></div>
          <div className="absolute inset-0 bg-gradient-to-b from-amber-950/20 via-transparent to-slate-950/40"></div>
          <div className="absolute inset-0 vignette"></div>

          <div className="absolute bottom-0 left-0 right-0 h-56 opacity-20">
            <div className="absolute bottom-0 left-20 w-32 h-40 bg-black rounded-t-lg"></div>
            <div className="absolute bottom-0 left-60 w-24 h-32 bg-black rounded-t-lg"></div>
            <div className="absolute bottom-0 right-40 w-28 h-36 bg-black rounded-t-lg"></div>
            <div className="absolute bottom-0 right-80 w-20 h-28 bg-black rounded-t-lg"></div>
          </div>

          <div className="relative z-10 min-h-screen flex flex-col items-center justify-center p-8">
            <div className="text-center mb-12 fade-in-up">
              <h1 className="cinzel text-5xl font-bold text-gray-200 mb-3 tracking-wide drop-shadow-xl">Lourmarin</h1>
              <p className="garamond text-gray-400 text-2xl italic">4. Januar 1960</p>
            </div>

            <div className="flex gap-20 mb-12">
              <div className={`transition-all duration-700 ${currentLine.speaker === leftChar ? 'scale-110 brightness-110' : 'opacity-50 scale-95'}`}>
                <div className="w-52 h-72 bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 border-4 border-gray-600 flex flex-col items-center justify-center shadow-2xl relative overflow-hidden">
                  <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"></div>
                  <div className={`relative w-40 h-40 mb-4 border-4 ${leftAvatar.border} flex items-center justify-center shadow-xl ${leftAvatar.shadow} overflow-hidden bg-gray-800`}>
                    <img src={leftAvatar.image} alt={leftChar} className="w-full h-full object-cover" />
                  </div>
                  <div className="cinzel relative text-gray-200 font-bold text-2xl mb-1">{leftChar}</div>
                  {leftChar !== 'Camus' && <div className="garamond relative text-gray-400 text-sm italic">Gallimard</div>}
                </div>
              </div>

              <div className={`transition-all duration-700 ${currentLine.speaker === rightChar ? 'scale-110 brightness-110' : 'opacity-50 scale-95'}`}>
                <div className="w-52 h-72 bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 rounded-lg border-4 border-gray-600 flex flex-col items-center justify-center shadow-2xl relative overflow-hidden">
                  <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"></div>
                  <div className={`relative w-40 h-40 mb-4 border-4 ${rightAvatar.border} flex items-center justify-center shadow-xl ${rightAvatar.shadow} overflow-hidden bg-gray-800`}>
                    <img src={rightAvatar.image} alt={rightChar} className="w-full h-full object-cover" />
                  </div>
                  <div className="cinzel relative text-gray-200 font-bold text-2xl mb-1">{rightChar}</div>
                  {rightChar !== 'Camus' && <div className="garamond relative text-gray-400 text-sm italic">Gallimard</div>}
                </div>
              </div>
            </div>

            <div className="max-w-4xl w-full bg-black/80 backdrop-blur-sm border-2 border-gray-700 shadow-2xl p-10 vignette" style={{ minHeight: '220px' }}>
              <div className="cinzel font-bold text-3xl mb-6 text-amber-400 tracking-wide">
                {currentLine.speaker}:
              </div>
              <div className="garamond text-gray-100 text-2xl mb-8 leading-relaxed" style={{ minHeight: '90px' }}>
                {displayedText}
                {isTyping && <span className="animate-pulse text-amber-400">│</span>}
              </div>
              <button
                onClick={handleDialogNext}
                disabled={isTyping}
                className={`cinzel w-full bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-gray-200 font-bold py-5 px-8 border-2 border-gray-600 transition-all duration-300 text-xl shadow-xl ${isTyping ? 'opacity-50' : 'hover:scale-[1.02]'}`}
              >
                {dialogStep < dialogLines.length - 1 ? '▶ Weiter' : '🚗 LOSFAHREN'}
              </button>
            </div>
          </div>
        </div>
      );
    }

    if (gameState === 'driving') {
      const currentDialog = drivingDialogs[drivingDialogIndex];
      const leftChar = 'Michel';
      const rightChar = 'Camus';
      const leftAvatar = getCharacterAvatar(leftChar);
      const rightAvatar = getCharacterAvatar(rightChar);

      return (
        <div className="h-screen bg-gray-900 relative flex flex-col overflow-hidden">
          {showCrashEffect && (
            <div className="absolute inset-0 bg-red-900 z-50 animate-pulse" style={{ animation: 'shake 0.5s infinite' }}>
              <div className="absolute inset-0 bg-black opacity-50"></div>
            </div>
          )}
          <div className="film-grain"></div>
          <div ref={mountRef} className="w-full flex-1"></div>

          <div className="w-full bg-gradient-to-t from-black via-gray-900 to-transparent relative p-6 flex items-center justify-center vignette" style={{ height: '280px', flexShrink: 0 }}>
            <div className="max-w-6xl w-full flex gap-6 items-end">
              <div className={`transition-all duration-500 ${currentDialog.speaker === leftChar ? 'scale-105 brightness-110' : 'opacity-60 scale-95'}`}>
                <div className="w-36 h-48 bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 border-4 border-gray-600 flex flex-col items-center justify-center shadow-2xl relative overflow-hidden">
                  <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"></div>
                  <div className={`relative w-28 h-28 mb-2 border-4 ${leftAvatar.border} flex items-center justify-center shadow-lg overflow-hidden bg-gray-800`}>
                    <img src={leftAvatar.image} alt={leftChar} className="w-full h-full object-cover" />
                  </div>
                  <div className="cinzel relative text-gray-200 font-bold text-lg">{leftChar}</div>
                  <div className="garamond relative text-gray-400 text-xs italic">Gallimard</div>
                </div>
              </div>

              <div className="flex-1 bg-black/90 backdrop-blur-sm border-2 border-gray-700 shadow-2xl p-8" style={{ height: '220px' }}>
                <div className="cinzel font-bold text-2xl mb-4 text-amber-400">
                  {currentDialog.speaker}:
                </div>
                <div className="garamond text-gray-100 text-xl mb-6 leading-relaxed" style={{ minHeight: '70px' }}>
                  {displayedText}
                  {isTyping && <span className="animate-pulse text-amber-400">│</span>}
                </div>

                <div style={{ height: '52px' }}>
                  {!showGasButton && drivingDialogIndex < drivingDialogs.length - 1 && (
                    <button
                      onClick={handleDrivingDialogNext}
                      disabled={isTyping}
                      className={`cinzel w-full bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-gray-200 font-bold py-3 px-6 border-2 border-gray-600 transition-all duration-300 ${isTyping ? 'opacity-50' : 'hover:scale-[1.01]'}`}
                    >
                      ▶ Weiter
                    </button>
                  )}

                  {showGasButton && (
                    <button
                      onClick={handleAccelerate}
                      className="cinzel w-full bg-gradient-to-r from-red-900 to-red-950 hover:from-red-800 hover:to-red-900 text-red-100 font-bold py-3 px-6 border-2 border-red-700 transition-all duration-300 shadow-lg shadow-red-900/50 hover:shadow-red-800/70 hover:scale-[1.01]"
                      style={{ animation: 'flicker 2s infinite' }}
                    >
                      ⚡ MEHR GAS GEBEN
                    </button>
                  )}
                </div>
              </div>

              <div className={`transition-all duration-500 ${currentDialog.speaker === rightChar ? 'scale-105 brightness-110' : 'opacity-60 scale-95'}`}>
                <div className="w-36 h-48 bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 rounded-lg border-4 border-gray-600 flex flex-col items-center justify-center shadow-2xl relative overflow-hidden">
                  <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent"></div>
                  <div className={`relative w-28 h-28 mb-2 border-4 ${rightAvatar.border} flex items-center justify-center shadow-lg overflow-hidden bg-gray-800`}>
                    <img src={rightAvatar.image} alt={rightChar} className="w-full h-full object-cover" />
                  </div>
                  <div className="cinzel relative text-gray-200 font-bold text-lg">{rightChar}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    if (gameState === 'crash') {
      return (
        <div className="min-h-screen bg-black flex items-center justify-center p-8 relative overflow-hidden">
          <div className="film-grain"></div>
          <div className="absolute inset-0 bg-gradient-to-b from-red-950/40 via-black to-black"></div>
          <div className="absolute inset-0" style={{ animation: 'flicker 3s infinite' }}>
            <div className="absolute inset-0 bg-red-950 opacity-20"></div>
          </div>

          <div className="max-w-4xl w-full text-center relative z-10 fade-in-up">
            <div className="mb-12">
              <div className="text-9xl mb-6">💀</div>
              <h1 className="cinzel text-8xl font-bold text-red-600 mb-8 drop-shadow-2xl tracking-wider" style={{ textShadow: '0 0 40px rgba(220, 38, 38, 0.5)' }}>
                GAME OVER
              </h1>
              <div className="h-1 w-96 mx-auto bg-gradient-to-r from-transparent via-red-600 to-transparent mb-12"></div>
            </div>

            <div className="bg-black/90 backdrop-blur-sm border-4 border-red-950 p-12 mb-12 vignette">
              <p className="garamond text-gray-100 text-3xl mb-8 leading-relaxed italic">
                »Das Absurdeste ist, in einem Autounfall zu sterben.«
              </p>
              <div className="h-px w-64 mx-auto bg-gradient-to-r from-transparent via-gray-600 to-transparent my-8"></div>
              <p className="cinzel text-gray-300 text-2xl mb-6 tracking-wide">
                ALBERT CAMUS
              </p>
              <p className="garamond text-gray-400 text-xl mb-4">
                1913 — 1960
              </p>
              <div className="h-px w-48 mx-auto bg-gradient-to-r from-transparent via-gray-700 to-transparent my-6"></div>
              <p className="garamond text-gray-500 text-lg mb-2">
                Villeblevin, Frankreich
              </p>
              <p className="garamond text-gray-600 text-lg">
                4. Januar 1960
              </p>
            </div>

            <div className="space-y-4">
              <button
                onClick={resetGame}
                className="cinzel w-full max-w-md mx-auto block bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-gray-200 font-bold py-6 px-12 border-2 border-gray-600 transition-all duration-300 text-2xl shadow-2xl hover:shadow-gray-700/50 hover:scale-105"
              >
                ↻ Noch einmal spielen
              </button>
              <p className="garamond text-gray-600 text-sm italic">
                Das Schicksal lässt sich nicht ändern, nur wiederholen
              </p>
            </div>
          </div>
        </div>
      );
    }
  };

  ReactDOM.createRoot(document.getElementById('root')).render(<CamusGame />);
  </script>
</body>
</html>