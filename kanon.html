<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>KANON</title>
        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
        <meta name="description" content="Eine Zusammenstellung sehenswerter Inhalte.">
        <meta property="og:type" content="article"/>
        <meta property="og:site_name" content="GEFÄNGNISHEFTE"/>
        <meta property="og:title" content="KANON"/>
        <meta property="og:description" content="Eine Zusammenstellung sehenswerter Inhalte."/>
        <meta property="og:image" itemprop="image" content="https://www.gefaengnishefte.org/images/opengraph/black_2x1.jpg"/>
        <meta property="og:image:type" content="image/jpeg"/>
        <meta property="og:image:width" content="1200"/>
        <meta property="og:image:height" content="630"/>
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="https://www.gefaengnishefte.org/images/opengraph/black_1x1.jpg" />

        <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/black/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/black/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/black/favicon-16x16.png">
        <link rel="manifest" href="images/favicon/black/site.webmanifest">
        <link rel="mask-icon" href="images/favicon/black/safari-pinned-tab.svg" color="#000000">
        <link rel="shortcut icon" href="images/favicon/black/favicon.ico">
        <meta name="apple-mobile-web-app-title" content="GEF&Auml;NGNISHEFTE">
        <meta name="application-name" content="GEF&Auml;NGNISHEFTE">
        <meta name="msapplication-TileColor" content="#000000">
        <meta name="msapplication-config" content="images/favicon/black/browserconfig.xml">
        <meta name="theme-color" content="#000000">
        
        <link rel="stylesheet" href="styles/fonts.css">
        <link rel="stylesheet" href="styles/general.css">
        <link rel="stylesheet" href="styles/black.css">

        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Regular.woff2">
        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Bold.woff2">
        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Italic.woff2">
        
        <link rel="preload" as="fetch" crossorigin href="components/header.html">
        <link rel="preload" as="fetch" crossorigin href="components/controls.html">
        <link rel="preload" as="fetch" crossorigin href="components/databanner.html">
        
        <script type="text/javascript" src="common.js"></script>
        <script>

            // TEMPLATES

            function index_template(slide, i) {return '<span id="index' + i + '" class="indexitem" onclick="display_slide(' + i + ')"><span lang="de">' + slide.getAttribute("data-title-de") + '</span><span lang="en">' + slide.getAttribute("data-title-en") + '</span></span><br>'}


            // LOADING & LOGO CHANGE

            load_components(["header", "controls", "databanner"])
            
            function suf_init() {
                init_timelines()
                document.getElementById("logo").innerHTML = "KANON"
            }


        </script>

        <script>

            const PROX_LIMIT = 60
            var current_events = []


            function init_timelines() {
                let timeline_btns = document.getElementById("timeline-btns")
                let timelines = document.getElementsByClassName("timeline")

                for (let i = 0; i < timelines.length; i++)
                {
                    let line = document.createElement("div")
                    line.className = "event-line"
                    timeline_btns.appendChild(line)

                    timelines[i].setAttribute("data-timeline-index", i)

                    let events = timelines[i].getElementsByClassName("event")

                    for (let k = 0; k < events.length; k++)
                    {
                        let event_btn = document.createElement("button")
                        event_btn.className = "event-btn"
                        event_btn.innerHTML = events[k].getAttribute('data-date')
                        event_btn.addEventListener("click", () => {select_event(k, i)})

                        line.appendChild(event_btn)
                    }

                    
                    current_events[i] = 0
                    select_event(current_events[i], i)
                }

                update_timelines()
                window.addEventListener("resize", update_timelines)
            }

            
            function select_event(selection, timeline_index) {
                let event_btns = document.getElementsByClassName("event-line")[timeline_index].getElementsByClassName("event-btn")
                let events = document.getElementsByClassName("timeline")[timeline_index].getElementsByClassName("event")
                let current_event = current_events[timeline_index]

                event_btns[current_event].style.backgroundColor = "black";
                events[current_event].style.display = "none";
                
                event_btns[selection].style.backgroundColor = "#890000";
                events[selection].style.display = "block";

                current_events[timeline_index] = selection
            }


            function update_timelines() {
                let timelines = document.getElementsByClassName("timeline")

                for (let i = 0; i < timelines.length; i++)
                {
                    let line = document.getElementById("timeline-btns").getElementsByClassName("event-line")[i]
                    let line_width = line.offsetWidth
                    let events = timelines[i].getElementsByClassName("event")


                    let start_date = 5000
                    let end_date = -5000

                    for (let k = 0; k < events.length; k++)
                    {
                        let date = events[k].getAttribute('data-date')

                        if(date < start_date) {
                            start_date = date
                        }

                        if(date >  end_date) {
                            end_date = date
                        }
                    }


                    let event_widths = []

                    for (let k = 0; k < events.length; k++)
                    {
                        let date = events[k].getAttribute('data-date')
                        let event_width = -28 + ((date - start_date) / (end_date - start_date)) * line_width + "px"

                        for (let l = 0; l < event_widths.length; l++)
                        { 

                            let compare = parseInt(event_widths[l], 10)
                            let current = parseInt(event_width, 10)

                            if(current >= compare && current <= (compare + PROX_LIMIT)) {
                                
                                if((current + 50) >= line_width) {
                                    let event_old = line.getElementsByClassName("event-btn")[l]
                                    let event_old_width = parseInt(event_old.style.left, 10) - PROX_LIMIT + "px"
                                    event_old.style.left = event_old_width
                                    event_widths[l] = event_old_width
                                }
                                else {
                                    event_width = current + PROX_LIMIT + "px"
                                }
                            }
                        }

                        line.getElementsByClassName("event-btn")[k].style.left = event_width
                        event_widths[k] = event_width
                    }
                }

                display_slide(slide_current)
            }

        </script>

        <style>

            
            body {
                grid-template-rows: auto 1fr auto;
                grid-template-areas: "header" "main" "controls";
            }

            #slide-title {
                display: none !important;
            }

            #slides > * {
                display: flex;
                flex-flow: column;
                align-items: center;
                justify-content: center;
            }

            .slideGrid, .slideColumn, .slideRow, .slideFlex, .slideGrow {
                place-content:center;
                place-items:center;
                max-width: 95vw;
            }

            .slideGrid {
                display: grid;
                grid-template-columns: auto auto;
                gap:150px;
            }

            .slideColumn {
                display: flex;
                flex-flow: column wrap;
                gap:75px;
            }

            /* .slideRow {
                display: flex;
                flex-flow: row nowrap;
                gap:150px;
            } */

            .slideFlex {
                display: flex;
                flex-flow: row wrap;
                gap:100px;
            }

            .slideGrow {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(30%, 1fr));
                gap:50px;
            }

            .extreme {width:70vw;}
            .large {width:60vw;}
            .medium {width:50vw;}
            .small {width:30vw;}
            .verysmall {width:20vw;}


            @media screen and (max-width: 1200px) {

                .slideGrid, .slideColumn, .slideRow {
                    display: flex;
                    flex-flow: column wrap;
                }

                .slideGrid, .slideColumn, .slideRow, .slideFlex, .slideGrow {
                    gap:50px;
                }

                .extreme {width:80vw;}
                .large {width:80vw;}
                .medium {width:80vw;}
                .small {width:60vw;}
                .verysmall {width:60vw;}
            }
            
            @media screen and (max-width: 600px) {
                .slideGrow {
                    grid-template-columns: repeat(auto-fit, minmax(80vh, 1fr));
                }

                .slideGrow.extreme * {width:80vw;}
                .slideGrow.large * {width:80vw;}
                .slideGrow.medium * {width:80vw;}
                .slideGrow.small * {width:60vw;}
                .slideGrow.verysmall * {width:60vw;}
            }

            .slideText {
                display:flex;
                width:fit-content;
                flex-direction: column;
                place-content: center;
            }

            .slideTitle {
                font-size: 12pt;
                margin-bottom: 10px;
                font-style: italic;
            }

            .slideBody {
                font-size: 20pt;
            }


            /* TIMELINE */

            .event-line {
                position: relative;
                background-color: black;
                border: 2px outset grey;
                width:100%;
            }

            .event-btn {
                cursor: pointer;
                position: absolute;
                border: 2px outset grey;
                bottom:-19px;
                outline: none;
                text-align: center;
                padding: 2px 7px;
                font-size: var(--font-medium);
                color: white;
                background-color: black;
            }

            .event {
                display: none;
            }

            .event-title {
                font-size: var(--font-large);
                margin-bottom: 60px;
            }
            
            
            @media screen and (max-width: 1000px){

                .event-line {
                    border:none;
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: center;
                    gap:10px;
                }

                .event-btn {
                    bottom: 0;
                    position: static;
                }
            }

        </style>
    </head>
    
    <body>
        <header id="header"></header>

        <main id="content">
            <div id="slides">


                
                <div data-title-de="DKP is Market Socialism" data-title-en="DKP is Market Socialism">
                    <iframe class="large" src="about:blank" data-source="youtube" data-id="BKGx5xrr5eg" sandbox></iframe><!--DKP is Market Socialism-->
                </div>

                <div data-title-de="history of the entire world, i guess" data-title-en="history of the entire world, i guess">
                    <iframe class="large" src="about:blank" data-source="youtube" data-id="xuCn8ux2gbs" sandbox></iframe><!--history of the entire world, i guess-->
                </div>

                <div data-title-de="HK Protest Footage" data-title-en="HK Protest Footage">
                    <iframe class="large" src="about:blank" data-source="youtube" data-id="RErdSr0iAcs" sandbox></iframe><!--"And I think to myself, what a wonderful world."-->
                </div>

                <div data-title-de="Historische Interviews" data-title-en="Historical Interviews">
                    <div class="slideFlex">
                        <iframe class="extreme" src="about:blank" data-source="youtube" data-id="SeIsyuoNfOg" data-list="PLnmTFbDYfiCB7ATkjsjXtMEADh2cC_4E0" sandbox></iframe><!--Günter Gaus-->
                    </div>
            
                    <div class="slideGrow extreme">
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="hs9ZsKj-o1k" data-timestamp="1624" sandbox></iframe><!--Cornelius Castoriadis On The Imaginary Institution of Society-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="feepQg_Dx7U" sandbox></iframe><!--Louis Althusser: The Crisis of Marxism (interview)-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="_g8JVK4Fppw" sandbox></iframe><!--Sartre on Intellectualism-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="H3AxGp5k-Qo" sandbox></iframe><!--Talkshow: Der zerstörte Tisch-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="6TK9c-caEcw" sandbox></iframe><!--Bertrand Russell on his meeting with Vladimir Lenin in 1920-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="ihaB8AFOhZo" sandbox></iframe><!--Bertrand Russell - Botschaft an zukünftige Generationen (1959)-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="XruYsAmKLyU" sandbox></iframe><!--German WWI veteran describes killing a French soldier in a bayonet charge-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="67tHtpac5ws" sandbox></iframe><!--Milton Friedman - I, Pencil-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="IaD1DcWfaGA" sandbox></iframe><!--Bernie Sanders interviews Punks [1988]-->
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="SYxZfksAyco" sandbox></iframe><!--30 Years of Speeches-->
                    </div>
                </div>


                <div data-title-de="Musik/Video" data-title-en="Music/Video">
                    <div class="slideFlex">
                        <iframe class="extreme" src="about:blank" data-source="youtube" data-id="qbbQb9bEcDQ" data-list="PLnmTFbDYfiCBh7lDCnNVkE4OXHQrxMHYu" sandbox></iframe><!--KANON // MUSIK-->
                    </div>
            
                    <div class="slideGrow extreme">
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="RM7lw0Ovzq0" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="FUQI-o02JYU" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="VYOjWnS4cMY" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="FJt7gNi3Nr4" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="tvTRZJ-4EyI" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="NLZRYQMLDW4" sandbox></iframe>
                        <iframe class="small" src="about:blank" data-source="youtube" data-id="4VQkk3sDLac" sandbox></iframe><!--yung lean live @ the back of the truck-->
                    </div>
            
                    <div class="slideFlex">
                        <div class="small slideText">
                            <span class="slideTitle"><span lang="de">MUSIK/VIDEO</span><span lang="en">MUSIC/VIDEO</span></span>
                            <span class="slideBody"><a href="https://www.grammy.com/videos/watch-kendrick-lamar-u2-dave-chappelle-open-2018-grammys-grammy-rewind">KENDRICK LAMARS GRAMMY PERFORMANCE 2018<br>XXX, DNA, NEW FREEZER, KING'S DEAD MASHUP</a></span><!--KENDRICK LAMAR - XXX, DNA, NEW FREEZER, KING'S DEAD-->
                        </div>
                    </div>
            
                </div>
            </div>
        </main>

        <div id="controls"></div>
        <div id="databanner"></div>
    </body>
</html>